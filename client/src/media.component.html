<div *ngIf="selectedMovie != null">
    <div class="selectedMovie" [ngStyle]="{ 'background': 'transparent url(' + selectedMovie.tmdb?.backdrop?.original + ') top center no-repeat', 'background-size': 'cover' }">
        <div class="background-cover">
            <button class="backBtn" (click)="goBack()">Back</button>
            <div class="cover"><img src="{{selectedMovie.tmdb?.poster?.w342}}" /></div>
            <div class="detailsLarge">
                <h3 class="title">{{getName(selectedMovie)}}</h3>
                <div class="tag">{{selectedMovie.tmdb?.tagline}}</div>
                <div class="metadata">
                    <span class="rate">
                        <object type="image/svg+xml" data="../img/media/rate-icon.svg"></object>{{selectedMovie.tmdb?.vote_average}}
                    </span>
                    <span>{{selectedMovie.tmdb?.release_date}}</span>
                    <span>{{selectedMovie.tmdb?.runtime}} minutes</span>
                    <span>{{selectedMovie.tmdb?.genres?.name}}</span>
                </div>
                <p class="synopsis">{{selectedMovie.tmdb?.overview}}</p>
            </div>
        </div>
    </div>
</div>
<div class="media" *ngIf="selectedMovie == null">
    <div class="leftpane">
        <header class="header">
            <a class="logo">
                <img src="../img/media/logo.svg" />
            </a>
        </header>
        <div class="filter local">
            <span class="title">Watchlist</span>
            <button [class.selected]="filter.type == null" (click)="setFilter('type', null)" class="allmedia">All Media</button>
            <button [class.selected]="filter.type == 'tv'" (click)="setFilter('type', 'tv')" class="tv">TV Shows</button>
            <button [class.selected]="filter.type == 'movie'" (click)="setFilter('type', 'movie')" class="movie">Movies</button>
            <hr />
            <button [class.selected]="filter.watched == null" (click)="setFilter('watched', null)" class="selected">Both</button>
            <button [class.selected]="filter.watched == true" (click)="setFilter('watched', true)">Watched</button>
            <button [class.selected]="filter.watched == false" (click)="setFilter('watched', false)">Not Watched</button>
            <hr />
            <button [class.selected]="filter.groupSimilar == true" (click)="setFilter('groupSimilar', true)">Group</button>
            <button [class.selected]="filter.groupSimilar == false" (click)="setFilter('groupSimilar', false)">Ungroup</button>
        </div>
        <div class="filter explore">
            <span class="title">Explore</span>
            <button class="allmedia">Most Popular</button>
            <button class="tv">Your Feed</button>
            <button class="movie">Recommended</button>
        </div>
    </div>
    <!-- Leftpane ends here -->
    <div class="rightpane">
        <div class="gridtop">
            <!-- <div class="title">your watchlist</div> -->
            <div class="search">
                <input type="text" placeholder="Quick Search" [(ngModel)]="filter.search" (input)="scheduleApplyFilter()" />
            </div>
        </div>
        <!-- <h3 class="title">your watchlist</h3> -->
        <ul class="pool">
            <li *ngFor="let movie of movies" class="media" [class.has-poster]="movie.tmdb?.poster?.w342 != null">
                <div class="poster">
                    <img *ngIf="movie.tmdb?.poster?.w342" src="{{movie.tmdb?.poster?.w342}}">
                </div>
                <div class="details">
                    <h5 class="title">{{getName(movie)}}</h5>
                    <span class="playtime">{{movie.tmdb?.release_date}}</span>
                    <div class="rating">{{movie.tmdb?.vote_average}}</div>
                    <a class="icon playicon" (click)="movie_click(movie)"><img src="../img/media/play-icon.svg" /></a>
                    <button class="status">View</button>
                    <button class="status" (click)="markAsWatched(media)">mark as watched</button>
                </div>
            </li>
        </ul>
    </div><!-- End of Right pane -->
</div>
<div style="color:white">
    <div *ngIf="app.config!=null">
        <h3>Folders</h3>
        <div *ngFor="let folder of app.config.folders">
            <input [(ngModel)]="folder.path" />
        </div>
        <button (click)="addConfigFolder()">+</button>
        <button (click)="app.saveConfig()">save</button>
        <button (click)="scan()">scan</button>
        <button (click)="reAnalyze()">re-analyze</button>
        <label>{{skip}}-{{skip+pageSize}} / {{filteredMovies?.length}} (total: {{allMovies?.length}})</label>
        <button (click)="prevPage()">Prev Page</button>
        <button (click)="nextPage()">Next Page</button>
        <button (click)="app.tmdb.loginToTmdb()">tmdb login</button>
        <button (click)="tmdbV4Login()">tmdb v4 login</button>
        <button (click)="tmdbV4Tests()">tmdb v4 tests</button>
        <button (click)="getAvailableMedia()">getAvailableMedia</button>
        <button (click)="app.tmdb.markAllRatedAsWatched()">Mark all rated as watched</button>
        <button (click)="app.downloadRatings()">Download Ratings</button>
        <button (click)="app.downloadWatchlists()">downloadWatchlists</button>
        <button (click)="app.getSavedRatings()">getSavedRatings</button>
        <button (click)="tvAiringToday()">airing today</button>
        <button (click)="tvOnTheAir()">on the air</button>
    </div>
    <div>
        <pre>{{scanStatus | json}}</pre>
    </div>
    <div>
        <div *ngFor="let media of movies">
            <span>{{getName(media)}}</span> - <span>{{media.fsEntry?.mtime}}</span>
            <button (click)="markAsWatched(media)">mark as watched</button>
            <label>watched={{media.md?.watched}}</label>
            <button [class.disabled]="canPlay(media)" (click)="play(media)">Play</button>
        </div>
    </div>
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
</div>
